<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Summary Pro - AI Powered Document Summarization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #000000 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .animation-delay-1000 { animation-delay: 1000ms; }
        .animation-delay-2000 { animation-delay: 2000ms; }
        .animation-delay-4000 { animation-delay: 4000ms; }
        
        .mouse-follower {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.05) 70%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
            transition: transform 0.1s ease-out;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .shine {
            position: relative;
            overflow: hidden;
        }
        
        .shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .shine:hover::before {
            left: 100%;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .modal-enter {
            animation: modalEnter 0.3s ease-out forwards;
        }
        
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-exit {
            animation: modalExit 0.2s ease-in forwards;
        }
        
        @keyframes modalExit {
            from {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
            to {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            z-index: 1000;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: #10b981;
        }
        
        .toast.error {
            background: #ef4444;
        }
        
        .toast.warning {
            background: #f59e0b;
        }
        
        .toast.info {
            background: #3b82f6;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            transition: width 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        .user-menu-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            color: white;
        }

        .user-email {
            font-size: 14px;
            color: #e2e8f0;
            font-weight: 500;
        }

        .logout-btn {
            background: rgba(239, 68, 68, 0.2);
            color: #fecaca;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.5);
            transform: translateY(-1px);
        }

        .credit-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .pricing-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .pricing-card.popular {
            border-color: #6366f1;
            transform: scale(1.05);
            position: relative;
        }

        .popular-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .password-strength {
            height: 4px;
            border-radius: 2px;
            margin-top: 4px;
            transition: all 0.3s ease;
        }

        .strength-weak { background: #ef4444; width: 25%; }
        .strength-fair { background: #f59e0b; width: 50%; }
        .strength-good { background: #3b82f6; width: 75%; }
        .strength-strong { background: #10b981; width: 100%; }

        @media (max-width: 768px) {
            .user-menu-container {
                gap: 8px;
            }
            
            .user-info {
                padding: 4px 8px;
            }
            
            .user-email {
                font-size: 12px;
            }
            
            .logout-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .logout-btn span {
                display: none;
            }
            
            .logout-btn i {
                margin: 0;
            }

            .credit-display {
                padding: 6px 12px;
                font-size: 12px;
            }

            .pricing-card.popular {
                transform: scale(1);
            }
        }

        @media (max-width: 480px) {
            .user-menu-container {
                flex-direction: column;
                gap: 6px;
                align-items: flex-end;
            }
            
            .user-info {
                order: 2;
            }
            
            .logout-btn {
                order: 1;
            }
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Mouse Followers -->
    <div id="mouse-follower-1" class="mouse-follower"></div>
    <div id="mouse-follower-2" class="mouse-follower"></div>
    <div id="mouse-follower-3" class="mouse-follower"></div>

    <!-- Navigation -->
    <nav class="relative z-50 glass border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <i class="fas fa-file-pdf text-indigo-600 text-xl"></i>
                    </div>
                    <span class="text-xl font-bold gradient-text">PDF Summary Pro</span>
                </div>
                
                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#features" class="hover:text-indigo-200 transition-colors duration-300">Features</a>
                    <a href="#how-it-works" class="hover:text-indigo-200 transition-colors duration-300">How It Works</a>
                    <a href="#pricing" class="hover:text-indigo-200 transition-colors duration-300">Pricing</a>
                </div>
                
                <!-- Auth Buttons - Show when user is NOT logged in -->
                <div id="auth-buttons" class="flex items-center space-x-4">
                    <button onclick="showAuthModal('login')" 
                            class="px-6 py-2 rounded-full border border-white/20 hover:bg-white/10 transition-all duration-300 shine text-white">
                        Login
                    </button>
                    <button onclick="showAuthModal('signup')" 
                            class="px-6 py-2 bg-white text-indigo-600 rounded-full font-semibold hover:shadow-lg transition-all duration-300 shine">
                        Get Started
                    </button>
                </div>
                
                <!-- User Menu - Show when user IS logged in -->
                <div id="user-menu" class="hidden user-menu-container">
                    <!-- Credit Display -->
                    <div class="credit-display">
                        <i class="fas fa-coins"></i>
                        <span id="user-credits">0</span>
                        <span>credits</span>
                    </div>
                    <div class="user-info">
                        <div class="user-avatar" id="user-initials">U</div>
                        <span class="user-email" id="user-email-nav">user@example.com</span>
                    </div>
                    <!-- Logout Button -->
                    <button onclick="logout()" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span class="logout-text">Logout</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8">
        <div class="text-center max-w-4xl mx-auto relative z-10">
            <!-- Animated Badge -->
            <div class="inline-flex items-center px-4 py-2 rounded-full glass border border-white/20 mb-8 float">
                <span class="w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></span>
                <span class="text-sm">AI Powered Document Summarization</span>
            </div>
            
            <!-- Main Heading -->
            <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">
                Summarize PDFs with
                <span class="gradient-text">AI Magic</span>
            </h1>
            
            <!-- Subheading -->
            <p class="text-xl md:text-2xl text-gray-200 mb-12 max-w-3xl mx-auto leading-relaxed">
                Transform lengthy documents into concise summaries instantly. Powered by advanced AI algorithms for accurate and meaningful insights.
            </p>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-16">
                <button onclick="showAuthModal('signup')" 
                        class="group px-8 py-4 bg-white text-indigo-600 rounded-full font-bold text-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 shine">
                    <span class="flex items-center space-x-2">
                        <span>Start Summarizing Free</span>
                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </span>
                </button>
                <button onclick="scrollToFeatures()" 
                        class="group px-8 py-4 border border-white/30 rounded-full font-semibold text-lg hover:bg-white/10 transition-all duration-300">
                    <span class="flex items-center space-x-2">
                        <span>See How It Works</span>
                        <i class="fas fa-arrow-down group-hover:translate-y-1 transition-transform"></i>
                    </span>
                </button>
            </div>
            
            <!-- Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-2xl mx-auto">
                <div class="glass rounded-2xl p-6 transform hover:scale-105 transition-all duration-300">
                    <div class="text-3xl font-bold text-indigo-300 mb-2">10K+</div>
                    <div class="text-gray-300">Documents Summarized</div>
                </div>
                <div class="glass rounded-2xl p-6 transform hover:scale-105 transition-all duration-300">
                    <div class="text-3xl font-bold text-purple-300 mb-2">99.9%</div>
                    <div class="text-gray-300">Accuracy Rate</div>
                </div>
                <div class="glass rounded-2xl p-6 transform hover:scale-105 transition-all duration-300">
                    <div class="text-3xl font-bold text-pink-300 mb-2">5s</div>
                    <div class="text-gray-300">Average Processing Time</div>
                </div>
            </div>
        </div>
        
        <!-- Floating Elements -->
        <div class="absolute top-20 left-10 w-20 h-20 bg-yellow-400/20 rounded-full blur-xl float animation-delay-1000"></div>
        <div class="absolute bottom-20 right-10 w-32 h-32 bg-cyan-400/20 rounded-full blur-xl float animation-delay-2000"></div>
    </section>

    <!-- Features Section -->
    <section id="features" class="relative py-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">Powerful Features</h2>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto">Everything you need to transform your document workflow</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-bolt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Lightning Fast</h3>
                    <p class="text-gray-300">Process documents in seconds with our optimized AI algorithms and cloud infrastructure.</p>
                </div>
                
                <!-- Feature 2 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-cyan-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-robot text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">AI Powered</h3>
                    <p class="text-gray-300">Advanced natural language processing for accurate and context-aware summaries.</p>
                </div>
                
                <!-- Feature 3 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-shield-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Secure & Private</h3>
                    <p class="text-gray-300">Your documents are processed securely and never stored on our servers.</p>
                </div>

                <!-- Feature 4 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-file-export text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Multiple Formats</h3>
                    <p class="text-gray-300">Export summaries in TXT, PDF, DOCX, HTML, and JSON formats for maximum flexibility.</p>
                </div>

                <!-- Feature 5 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-list-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">6 Summary Types</h3>
                    <p class="text-gray-300">Choose from brief, detailed, bullet points, executive, chapter-wise, or Q&A summaries.</p>
                </div>

                <!-- Feature 6 -->
                <div class="glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-500 group">
                    <div class="w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-shield-check text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Advanced Security</h3>
                    <p class="text-gray-300">Comprehensive file validation, malware scanning, and secure processing protocols.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="relative py-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">How It Works</h2>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto">Simple steps to get your summaries</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Step 1 -->
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-2xl font-bold border-4 border-white/20">
                        1
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Upload PDF</h3>
                    <p class="text-gray-300">Drag & drop or select your PDF file</p>
                </div>
                
                <!-- Step 2 -->
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-2xl font-bold border-4 border-white/20">
                        2
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Choose Summary Type</h3>
                    <p class="text-gray-300">Select from 6 different summary formats</p>
                </div>
                
                <!-- Step 3 -->
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-6 text-white text-2xl font-bold border-4 border-white/20">
                        3
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Download & Export</h3>
                    <p class="text-gray-300">Get your summary in multiple formats</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="relative py-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">Simple, Transparent Pricing</h2>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto">Choose the plan that works best for you. No hidden fees.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <!-- Free Plan -->
                <div class="pricing-card glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-300">
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold mb-2">Free</h3>
                        <div class="text-4xl font-bold text-white mb-4">$0<span class="text-lg text-gray-300">/month</span></div>
                        <p class="text-gray-300">Perfect for getting started</p>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>5 credits per month</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Basic summary types</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Up to 10-page PDFs</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Text export only</span>
                        </div>
                        <div class="flex items-center space-x-3 text-gray-500">
                            <i class="fas fa-times"></i>
                            <span>Priority processing</span>
                        </div>
                        <div class="flex items-center space-x-3 text-gray-500">
                            <i class="fas fa-times"></i>
                            <span>Advanced AI models</span>
                        </div>
                    </div>
                    
                    <button onclick="showAuthModal('signup')" 
                            class="w-full py-3 bg-white/10 border border-white/20 rounded-xl font-semibold text-white hover:bg-white/20 transition-all duration-300">
                        Get Started Free
                    </button>
                </div>
                
                <!-- Pro Plan -->
                <div class="pricing-card glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-300 popular">
                    <div class="popular-badge">MOST POPULAR</div>
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold mb-2">Pro</h3>
                        <div class="text-4xl font-bold text-white mb-4">$9<span class="text-lg text-gray-300">/month</span></div>
                        <p class="text-gray-300">For power users and professionals</p>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>100 credits per month</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>All 6 summary types</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Up to 50-page PDFs</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>All export formats</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Priority processing</span>
                        </div>
                        <div class="flex items-center space-x-3 text-gray-500">
                            <i class="fas fa-times"></i>
                            <span>Advanced AI models</span>
                        </div>
                    </div>
                    
                    <button onclick="upgradeToPro()" 
                            class="w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                        Upgrade to Pro
                    </button>
                </div>
                
                <!-- Enterprise Plan -->
                <div class="pricing-card glass rounded-3xl p-8 transform hover:scale-105 transition-all duration-300">
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold mb-2">Enterprise</h3>
                        <div class="text-4xl font-bold text-white mb-4">$29<span class="text-lg text-gray-300">/month</span></div>
                        <p class="text-gray-300">For teams and businesses</p>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>500 credits per month</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>All summary types</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Unlimited PDF size</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>All export formats</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Priority processing</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check text-green-400"></i>
                            <span>Advanced AI models</span>
                        </div>
                    </div>
                    
                    <button onclick="contactSales()" 
                            class="w-full py-3 bg-white/10 border border-white/20 rounded-xl font-semibold text-white hover:bg-white/20 transition-all duration-300">
                        Contact Sales
                    </button>
                </div>
            </div>
            
            <!-- Credit Information -->
            <div class="text-center mt-16 glass rounded-3xl p-8 max-w-4xl mx-auto">
                <h3 class="text-2xl font-bold mb-4">How Credits Work</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-left">
                    <div>
                        <h4 class="text-lg font-semibold mb-3 text-indigo-300">Credit Usage</h4>
                        <ul class="space-y-2 text-gray-300">
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-file-pdf text-indigo-400"></i>
                                <span>1 credit = 1 PDF summary</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-sync-alt text-indigo-400"></i>
                                <span>Credits reset monthly</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-bolt text-indigo-400"></i>
                                <span>Unused credits don't roll over</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-3 text-indigo-300">Additional Credits</h4>
                        <ul class="space-y-2 text-gray-300">
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-shopping-cart text-indigo-400"></i>
                                <span>Buy extra credits anytime</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-tags text-indigo-400"></i>
                                <span>10 credits for $2</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-percentage text-indigo-400"></i>
                                <span>Bulk discounts available</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Auth Modal -->
    <div id="auth-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="hideAuthModal()"></div>
        
        <div class="relative w-full max-w-md">
            <div class="glass rounded-3xl p-8 transform transition-all duration-500 shadow-2xl" id="auth-modal-content">
                <!-- Login Form -->
                <div id="login-form">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold mb-2 text-white">Welcome Back</h2>
                        <p class="text-gray-300">Sign in to your account</p>
                    </div>
                    
                    <form class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Email</label>
                            <div class="relative">
                                <input type="email" id="login-email" 
                                       class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition-all duration-300"
                                       placeholder="Enter your email">
                                <i class="fas fa-envelope absolute right-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="login-password" 
                                       class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition-all duration-300"
                                       placeholder="Enter your password">
                                <i class="fas fa-lock absolute right-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        
                        <button type="button" onclick="login()" 
                                class="w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300 shadow-lg">
                            Sign In
                        </button>
                    </form>
                    
                    <div class="text-center mt-6">
                        <span class="text-gray-400">Don't have an account? </span>
                        <button onclick="switchAuthForm('signup')" class="text-indigo-300 hover:text-indigo-200 font-semibold transition-colors">
                            Sign Up
                        </button>
                    </div>
                </div>
                
                <!-- Signup Form -->
                <div id="signup-form" class="hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold mb-2 text-white">Create Account</h2>
                        <p class="text-gray-300">Join thousands of users</p>
                    </div>
                    
                    <form class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Full Name</label>
                            <div class="relative">
                                <input type="text" id="signup-name" 
                                       class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition-all duration-300"
                                       placeholder="Enter your full name">
                                <i class="fas fa-user absolute right-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Email</label>
                            <div class="relative">
                                <input type="email" id="signup-email" 
                                       class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition-all duration-300"
                                       placeholder="Enter your email">
                                <i class="fas fa-envelope absolute right-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="signup-password" 
                                       class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent transition-all duration-300"
                                       placeholder="Create a password"
                                       oninput="checkPasswordStrength(this.value)">
                                <i class="fas fa-lock absolute right-3 top-3 text-gray-400"></i>
                            </div>
                            <div id="password-strength" class="password-strength"></div>
                            <div id="password-feedback" class="text-xs mt-1 text-gray-400"></div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="terms" class="w-4 h-4 rounded bg-white/10 border-white/20">
                            <label for="terms" class="text-sm text-gray-300">
                                I agree to the <a href="#" class="text-indigo-300 hover:text-indigo-200">Terms of Service</a> and <a href="#" class="text-indigo-300 hover:text-indigo-200">Privacy Policy</a>
                            </label>
                        </div>
                        
                        <button type="button" onclick="signup()" 
                                class="w-full py-3 bg-gradient-to-r from-green-500 to-cyan-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300 shadow-lg">
                            Create Account
                        </button>
                    </form>
                    
                    <div class="text-center mt-6">
                        <span class="text-gray-400">Already have an account? </span>
                        <button onclick="switchAuthForm('login')" class="text-indigo-300 hover:text-indigo-200 font-semibold transition-colors">
                            Sign In
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Close Button -->
            <button onclick="hideAuthModal()" 
                    class="absolute -top-4 -right-4 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors shadow-lg z-10">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="hidePaymentModal()"></div>
        
        <div class="relative w-full max-w-md">
            <div class="glass rounded-3xl p-8 transform transition-all duration-500 shadow-2xl">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2 text-white">Complete Payment</h2>
                    <p class="text-gray-300">Purchase <span id="payment-credits">10</span> credits</p>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-white/10 rounded-xl p-4 border border-white/20">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-300">Credits:</span>
                            <span class="font-semibold text-white" id="payment-credits-display">10</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Total:</span>
                            <span class="text-xl font-bold text-white">$<span id="payment-total">2.00</span></span>
                        </div>
                    </div>
                    
                    <!-- Stripe Payment Element -->
                    <div id="payment-element" class="bg-white/5 rounded-xl p-4 border border-white/20">
                        <!-- Stripe will inject the payment form here -->
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-credit-card text-2xl mb-2"></i>
                            <p>Payment form loading...</p>
                        </div>
                    </div>
                    
                    <button onclick="processPayment()" 
                            class="w-full py-3 bg-gradient-to-r from-green-500 to-cyan-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                        Pay $<span id="payment-button-total">2.00</span>
                    </button>
                </div>
            </div>
            
            <!-- Close Button -->
            <button onclick="hidePaymentModal()" 
                    class="absolute -top-4 -right-4 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors shadow-lg z-10">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Main App Section (Hidden until login) -->
    <div id="main-app" class="hidden min-h-screen py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">
            <!-- App Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">PDF Summary Pro</h1>
                <p class="text-xl text-gray-300">Upload your PDF and get AI-powered summaries in multiple formats</p>
            </div>
            
            <!-- Credit Info Banner -->
            <div class="glass rounded-2xl p-6 mb-8 border border-indigo-500/30">
                <div class="flex flex-col md:flex-row items-center justify-between">
                    <div class="flex items-center space-x-4 mb-4 md:mb-0">
                        <div class="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-coins text-white text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-white">Your Credits</h3>
                            <p class="text-gray-300">Credits reset on <span id="reset-date">1st of next month</span></p>
                        </div>
                    </div>
                    <div class="text-center md:text-right">
                        <div class="text-3xl font-bold text-indigo-300" id="current-credits">5</div>
                        <p class="text-gray-300">credits remaining</p>
                    </div>
                    <button onclick="showCreditModal()" 
                            class="mt-4 md:mt-0 px-6 py-2 bg-gradient-to-r from-green-500 to-cyan-500 rounded-xl font-semibold text-white hover:shadow-lg transition-all duration-300">
                        Buy More Credits
                    </button>
                </div>
            </div>
            
            <!-- Upload Section -->
            <div class="glass rounded-3xl p-8 mb-8">
                <div id="upload-area" 
                     class="border-2 border-dashed border-white/30 rounded-2xl p-12 text-center cursor-pointer transition-all duration-300 hover:border-indigo-400 hover:bg-white/5 group">
                    <input type="file" id="pdf-file" accept=".pdf" class="hidden">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-cloud-upload-alt text-white text-2xl"></i>
                        </div>
                        <p class="text-xl text-gray-200 mb-2">Click to upload PDF</p>
                        <p class="text-gray-400">or drag and drop your file here</p>
                        <p class="text-gray-500 text-sm mt-2">Max file size: 10MB â€¢ Supported: PDF only</p>
                    </div>
                </div>
                
                <div id="file-info" class="hidden mt-6 p-4 bg-white/10 rounded-xl border border-white/20">
                    <!-- File info will be displayed here by JavaScript -->
                </div>
                
                <!-- Summary Options -->
                <div id="summary-options" class="hidden mt-8">
                    <h3 class="text-xl font-bold text-white mb-4">Choose Summary Type</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6" id="summary-types-container">
                        <!-- Summary types will be rendered here by JavaScript -->
                    </div>
                    
                    <div class="bg-yellow-500/20 border border-yellow-500/30 rounded-xl p-4 mb-6">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                            <div>
                                <p class="text-yellow-200 font-semibold">This will use 1 credit</p>
                                <p class="text-yellow-300 text-sm">You have <span id="credits-before-processing">5</span> credits remaining</p>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="uploadPDF()" 
                            class="w-full py-4 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center space-x-2">
                        <span>Generate Summary (1 Credit)</span>
                        <i class="fas fa-magic"></i>
                    </button>
                </div>
            </div>
            
            <!-- Results Section -->
            <div id="results-section" class="hidden glass rounded-3xl p-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-white">Summary</h2>
                    <div class="flex items-center space-x-3">
                        <button onclick="exportSummary()" 
                                class="px-4 py-2 bg-green-500 rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2">
                            <i class="fas fa-download"></i>
                            <span>Export</span>
                        </button>
                        <button onclick="resetApp()" 
                                class="px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors flex items-center space-x-2">
                            <i class="fas fa-redo"></i>
                            <span>New PDF</span>
                        </button>
                    </div>
                </div>
                
                <div class="mb-4 flex items-center justify-between text-sm text-gray-400">
                    <span>Summary Type: <strong class="text-white" id="summary-type-display">Brief Summary</strong></span>
                    <span id="summary-stats">0 words</span>
                </div>
                
                <div id="summary-content" class="bg-white/5 rounded-xl p-6 border border-white/10 text-gray-200 leading-relaxed whitespace-pre-wrap min-h-[200px] max-h-[600px] overflow-y-auto">
                    <!-- Summary content will appear here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Credit Purchase Modal -->
    <div id="credit-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="hideCreditModal()"></div>
        
        <div class="relative w-full max-w-md">
            <div class="glass rounded-3xl p-8 transform transition-all duration-500 shadow-2xl">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2 text-white">Buy More Credits</h2>
                    <p class="text-gray-300">Get additional credits for your PDF summaries</p>
                </div>
                
                <div class="space-y-4 mb-6">
                    <div class="flex items-center justify-between p-4 bg-white/10 rounded-xl border border-white/20 cursor-pointer hover:bg-white/20 transition-all duration-300" onclick="selectCreditPackage(10)">
                        <div>
                            <h4 class="font-semibold text-white">10 Credits</h4>
                            <p class="text-gray-300 text-sm">Perfect for occasional use</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-white">$2.00</div>
                            <div class="text-gray-400 text-sm">$0.20 per credit</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white/10 rounded-xl border border-indigo-500/50 cursor-pointer hover:bg-white/20 transition-all duration-300" onclick="selectCreditPackage(50)">
                        <div>
                            <h4 class="font-semibold text-white">50 Credits</h4>
                            <p class="text-gray-300 text-sm">Most popular choice</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-white">$8.00</div>
                            <div class="text-gray-400 text-sm">$0.16 per credit</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white/10 rounded-xl border border-white/20 cursor-pointer hover:bg-white/20 transition-all duration-300" onclick="selectCreditPackage(100)">
                        <div>
                            <h4 class="font-semibold text-white">100 Credits</h4>
                            <p class="text-gray-300 text-sm">Best value for heavy users</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-white">$14.00</div>
                            <div class="text-gray-400 text-sm">$0.14 per credit</div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center text-gray-400 text-sm mb-6">
                    <p>Credits never expire and can be used anytime</p>
                </div>
                
                <button onclick="showPaymentModal()" 
                        class="w-full py-3 bg-gradient-to-r from-green-500 to-cyan-500 rounded-xl font-semibold text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                    Purchase <span id="selected-credits">10</span> Credits - $<span id="selected-price">2.00</span>
                </button>
                
                <div class="text-center mt-4">
                    <button onclick="hideCreditModal()" class="text-gray-400 hover:text-gray-300 transition-colors">
                        Maybe later
                    </button>
                </div>
            </div>
            
            <!-- Close Button -->
            <button onclick="hideCreditModal()" 
                    class="absolute -top-4 -right-4 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors shadow-lg z-10">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Main Application Script -->
    <script>
    // Set up PDF.js worker
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

    // =============================================
    // Global Variables
    // =============================================
    let currentUser = null;
    let selectedFile = null;
    let selectedSummaryType = 'brief';
    let extractedText = '';
    let userCredits = 5;
    let selectedCreditPackage = {
        credits: 10,
        price: 2.00
    };
    let stripe = null;
    let elements = null;

    // =============================================
    // Enhanced UX Utilities
    // =============================================
    const enhancedUX = {
        showToast: function(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="flex items-center justify-between">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 4000);
        },
        
        showLoading: function(button, text = 'Loading...') {
            if (!button) return;
            
            button.disabled = true;
            const originalHTML = button.innerHTML;
            button.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                    <span>${text}</span>
                </div>
            `;
            button.setAttribute('data-original-html', originalHTML);
        },
        
        hideLoading: function(button) {
            if (!button) return;
            
            button.disabled = false;
            const originalHTML = button.getAttribute('data-original-html');
            if (originalHTML) {
                button.innerHTML = originalHTML;
            }
        }
    };

    // =============================================
    // Password Strength Checker
    // =============================================
    function checkPasswordStrength(password) {
        const strengthBar = document.getElementById('password-strength');
        const feedback = document.getElementById('password-feedback');
        
        if (!password) {
            strengthBar.className = 'password-strength';
            feedback.textContent = '';
            return;
        }
        
        let strength = 0;
        let feedbackText = '';
        
        // Length check
        if (password.length >= 8) strength += 1;
        
        // Contains lowercase
        if (/[a-z]/.test(password)) strength += 1;
        
        // Contains uppercase
        if (/[A-Z]/.test(password)) strength += 1;
        
        // Contains numbers
        if (/[0-9]/.test(password)) strength += 1;
        
        // Contains special characters
        if (/[^A-Za-z0-9]/.test(password)) strength += 1;
        
        // Update UI
        switch(strength) {
            case 0:
            case 1:
                strengthBar.className = 'password-strength strength-weak';
                feedbackText = 'Weak password';
                break;
            case 2:
                strengthBar.className = 'password-strength strength-fair';
                feedbackText = 'Fair password';
                break;
            case 3:
                strengthBar.className = 'password-strength strength-good';
                feedbackText = 'Good password';
                break;
            case 4:
            case 5:
                strengthBar.className = 'password-strength strength-strong';
                feedbackText = 'Strong password';
                break;
        }
        
        feedback.textContent = feedbackText;
        return strength;
    }

    // =============================================
    // Credit Management
    // =============================================
    const creditManager = {
        initializeCredits: function() {
            const savedCredits = localStorage.getItem('userCredits');
            if (savedCredits) {
                userCredits = parseInt(savedCredits);
            }
            this.updateCreditDisplay();
        },
        
        updateCreditDisplay: function() {
            // Update navigation
            const navCredits = document.getElementById('user-credits');
            if (navCredits) {
                navCredits.textContent = userCredits;
            }
            
            // Update main app
            const currentCredits = document.getElementById('current-credits');
            const creditsBeforeProcessing = document.getElementById('credits-before-processing');
            
            if (currentCredits) currentCredits.textContent = userCredits;
            if (creditsBeforeProcessing) creditsBeforeProcessing.textContent = userCredits;
        },
        
        useCredit: function() {
            if (userCredits > 0) {
                userCredits--;
                localStorage.setItem('userCredits', userCredits);
                this.updateCreditDisplay();
                return true;
            }
            return false;
        },
        
        addCredits: function(amount) {
            userCredits += amount;
            localStorage.setItem('userCredits', userCredits);
            this.updateCreditDisplay();
            enhancedUX.showToast(`Successfully added ${amount} credits!`, 'success');
        },
        
        getResetDate: function() {
            const now = new Date();
            const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
            return nextMonth.toLocaleDateString('en-US', { 
                month: 'long', 
                day: 'numeric', 
                year: 'numeric' 
            });
        }
    };

    // =============================================
    // File Validation Utilities
    // =============================================
    const fileValidator = {
        validatePDF: function(file) {
            return new Promise((resolve) => {
                // Check file type
                if (file.type !== 'application/pdf') {
                    resolve({
                        isValid: false,
                        error: 'Please upload a valid PDF file'
                    });
                    return;
                }
                
                // Check file size (10MB max)
                const maxSize = 10 * 1024 * 1024; // 10MB in bytes
                if (file.size > maxSize) {
                    resolve({
                        isValid: false,
                        error: 'File size exceeds 10MB limit'
                    });
                    return;
                }
                
                // Mock validation
                setTimeout(() => {
                    resolve({
                        isValid: true,
                        pages: Math.floor(Math.random() * 50) + 1,
                        isScanned: Math.random() > 0.8
                    });
                }, 500);
            });
        },
        
        getFileInfo: function(file) {
            return {
                name: file.name,
                size: this.formatFileSize(file.size),
                type: file.type,
                lastModified: new Date(file.lastModified).toLocaleDateString()
            };
        },
        
        formatFileSize: function(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    };

    // =============================================
    // PDF Text Extraction
    // =============================================
    const pdfExtractor = {
        extractTextFromPDF: async function(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                let fullText = '';
                
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n\n';
                }
                
                return fullText;
            } catch (error) {
                console.error('Error extracting text from PDF:', error);
                throw new Error('Failed to extract text from PDF. The file may be corrupted or encrypted.');
            }
        },
        
        cleanText: function(text) {
            // Remove excessive whitespace and clean up text
            return text
                .replace(/\s+/g, ' ')
                .replace(/([.!?])\s*(?=[A-Z])/g, '$1\n\n')
                .trim();
        },
        
        identifySections: function(text) {
            // Simple section identification based on common patterns
            const sections = {
                introduction: '',
                methodology: '',
                results: '',
                conclusion: '',
                other: ''
            };
            
            const lines = text.split('\n');
            let currentSection = 'other';
            
            for (const line of lines) {
                const lowerLine = line.toLowerCase().trim();
                
                if (lowerLine.includes('introduction') || lowerLine.includes('abstract')) {
                    currentSection = 'introduction';
                } else if (lowerLine.includes('method') || lowerLine.includes('approach')) {
                    currentSection = 'methodology';
                } else if (lowerLine.includes('result') || lowerLine.includes('finding')) {
                    currentSection = 'results';
                } else if (lowerLine.includes('conclusion') || lowerLine.includes('discussion')) {
                    currentSection = 'conclusion';
                } else if (line.trim().length > 0) {
                    sections[currentSection] += line + ' ';
                }
            }
            
            return sections;
        }
    };

    // =============================================
    // Summary Types Management
    // =============================================
    const summaryTypes = {
        types: [
            {
                id: 'brief',
                name: 'Brief Summary',
                description: 'Short and concise overview',
                icon: 'fas fa-file-alt',
                color: 'from-blue-500 to-cyan-500'
            },
            {
                id: 'detailed',
                name: 'Detailed Summary',
                description: 'Comprehensive analysis',
                icon: 'fas fa-file-medical',
                color: 'from-green-500 to-emerald-500'
            },
            {
                id: 'bullet',
                name: 'Bullet Points',
                description: 'Key points in bullet format',
                icon: 'fas fa-list-ul',
                color: 'from-purple-500 to-pink-500'
            },
            {
                id: 'executive',
                name: 'Executive Summary',
                description: 'High-level insights for decision makers',
                icon: 'fas fa-chart-line',
                color: 'from-orange-500 to-red-500'
            },
            {
                id: 'chapter',
                name: 'Chapter-wise Summary',
                description: 'Summary organized by chapters/sections',
                icon: 'fas fa-book',
                color: 'from-indigo-500 to-purple-500'
            },
            {
                id: 'qa',
                name: 'Q&A Summary',
                description: 'Questions and answers from the content',
                icon: 'fas fa-question-circle',
                color: 'from-yellow-500 to-orange-500'
            }
        ],
        
        renderTypes: function() {
            const container = document.getElementById('summary-types-container');
            if (!container) return;
            
            container.innerHTML = this.types.map(type => `
                <div class="summary-type-card cursor-pointer group" data-type="${type.id}">
                    <div class="glass rounded-xl p-4 border-2 border-transparent group-hover:border-white/30 transition-all duration-300 h-full">
                        <div class="flex items-start space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-r ${type.color} rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class="${type.icon} text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white mb-1">${type.name}</h4>
                                <p class="text-gray-400 text-sm">${type.description}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add click event listeners
            document.querySelectorAll('.summary-type-card').forEach(card => {
                card.addEventListener('click', () => {
                    this.selectType(card.dataset.type);
                });
            });
        },
        
        selectType: function(typeId) {
            selectedSummaryType = typeId;
            
            // Update UI
            document.querySelectorAll('.summary-type-card').forEach(card => {
                const cardElement = card.querySelector('.glass');
                if (card.dataset.type === typeId) {
                    cardElement.classList.add('border-indigo-400', 'bg-indigo-500/20');
                    cardElement.classList.remove('border-transparent');
                } else {
                    cardElement.classList.remove('border-indigo-400', 'bg-indigo-500/20');
                    cardElement.classList.add('border-transparent');
                }
            });
        },
        
        getSelectedType: function() {
            return this.types.find(type => type.id === selectedSummaryType);
        }
    };

    // =============================================
    // PDF Processing - REAL CONTENT BASED
    // =============================================
    const pdfProcessor = {
        processPDF: async function(file, summaryType) {
            try {
                // Extract text from PDF
                extractedText = await pdfExtractor.extractTextFromPDF(file);
                extractedText = pdfExtractor.cleanText(extractedText);
                
                // Generate summary based on actual content
                const summary = this.generateSummaryFromContent(extractedText, summaryType, file.name);
                return summary;
            } catch (error) {
                console.error('Error processing PDF:', error);
                throw error;
            }
        },
        
        generateSummaryFromContent: function(text, summaryType, filename) {
            const sections = pdfExtractor.identifySections(text);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            
            const baseContent = `PDF Summary Report
Generated: ${new Date().toLocaleString()}
File: ${filename}
Original Content Length: ${text.length} characters
Summary Type: ${summaryTypes.getSelectedType().name}

`;
            
            // Generate different summary types based on actual content
            switch(summaryType) {
                case 'brief':
                    return this.generateBriefSummary(baseContent, sentences, sections);
                case 'detailed':
                    return this.generateDetailedSummary(baseContent, sentences, sections);
                case 'bullet':
                    return this.generateBulletSummary(baseContent, sentences, sections);
                case 'executive':
                    return this.generateExecutiveSummary(baseContent, sentences, sections);
                case 'chapter':
                    return this.generateChapterSummary(baseContent, sections);
                case 'qa':
                    return this.generateQASummary(baseContent, sentences, sections);
                default:
                    return this.generateBriefSummary(baseContent, sentences, sections);
            }
        },
        
        generateBriefSummary: function(baseContent, sentences, sections) {
            // Take first few meaningful sentences
            const keySentences = sentences
                .filter(s => s.length > 20)
                .slice(0, 3)
                .map(s => s.trim());
                
            return baseContent + 
                "BRIEF OVERVIEW:\n\n" +
                keySentences.join('. ') + 
                ".\n\nThis summary captures the essential information from the document in a concise format.";
        },
        
        generateDetailedSummary: function(baseContent, sentences, sections) {
            let summary = baseContent + "DETAILED ANALYSIS:\n\n";
            
            if (sections.introduction) {
                summary += "INTRODUCTION:\n" + this.extractKeyPoints(sections.introduction, 3) + "\n\n";
            }
            
            if (sections.methodology) {
                summary += "METHODOLOGY:\n" + this.extractKeyPoints(sections.methodology, 3) + "\n\n";
            }
            
            if (sections.results) {
                summary += "KEY FINDINGS:\n" + this.extractKeyPoints(sections.results, 4) + "\n\n";
            }
            
            if (sections.conclusion) {
                summary += "CONCLUSION:\n" + this.extractKeyPoints(sections.conclusion, 2) + "\n\n";
            }
            
            if (sections.other) {
                summary += "ADDITIONAL INFORMATION:\n" + this.extractKeyPoints(sections.other, 3) + "\n\n";
            }
            
            return summary;
        },
        
        generateBulletSummary: function(baseContent, sentences, sections) {
            let summary = baseContent + "KEY POINTS:\n\n";
            
            // Extract key points from each section
            Object.entries(sections).forEach(([sectionName, content]) => {
                if (content.trim().length > 0) {
                    const points = this.extractBulletPoints(content, 3);
                    if (points.length > 0) {
                        summary += `${sectionName.toUpperCase()}:\n`;
                        points.forEach(point => {
                            summary += `â€¢ ${point}\n`;
                        });
                        summary += "\n";
                    }
                }
            });
            
            return summary;
        },
        
        generateExecutiveSummary: function(baseContent, sentences, sections) {
            return baseContent + 
                "EXECUTIVE SUMMARY\n\n" +
                "This document presents " + (sections.introduction ? this.getFirstSentence(sections.introduction) : "important information") + 
                "\n\nKEY INSIGHTS:\n" +
                this.extractBulletPoints(sections.results || sections.other, 4).map(p => `â€¢ ${p}`).join('\n') +
                "\n\nRECOMMENDATIONS:\n" +
                "Based on the analysis, the document suggests " + 
                (sections.conclusion ? this.getFirstSentence(sections.conclusion) : "further consideration of the presented information") +
                "\n\nIMPACT ASSESSMENT:\nThe findings have significant implications for the relevant field and warrant careful consideration.";
        },
        
        generateChapterSummary: function(baseContent, sections) {
            let summary = baseContent + "SECTION-BY-SECTION SUMMARY\n\n";
            
            Object.entries(sections).forEach(([sectionName, content]) => {
                if (content.trim().length > 0) {
                    summary += `${sectionName.toUpperCase()}:\n` +
                              this.extractKeyPoints(content, 2) + "\n\n";
                }
            });
            
            return summary;
        },
        
        generateQASummary: function(baseContent, sentences, sections) {
            const questions = [
                "What is the main purpose of this document?",
                "What are the key findings or results?",
                "What methodology or approach was used?",
                "What conclusions are drawn?",
                "What are the main recommendations?"
            ];
            
            let summary = baseContent + "QUESTIONS & ANSWERS\n\n";
            
            questions.forEach((question, index) => {
                summary += `Q: ${question}\n`;
                summary += `A: ${this.generateAnswer(question, sections)}\n\n`;
            });
            
            return summary;
        },
        
        extractKeyPoints: function(text, maxPoints = 3) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
            return sentences.slice(0, maxPoints).map(s => s.trim()).join('. ');
        },
        
        extractBulletPoints: function(text, maxPoints = 3) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 15);
            return sentences.slice(0, maxPoints).map(s => s.trim());
        },
        
        getFirstSentence: function(text) {
            const sentences = text.split(/[.!?]+/);
            return sentences[0]?.trim() || "relevant content from the document";
        },
        
        generateAnswer: function(question, sections) {
            const lowerQuestion = question.toLowerCase();
            
            if (lowerQuestion.includes('purpose') || lowerQuestion.includes('main')) {
                return sections.introduction ? this.getFirstSentence(sections.introduction) : "To present important information and findings.";
            } else if (lowerQuestion.includes('finding') || lowerQuestion.includes('result')) {
                return sections.results ? this.extractKeyPoints(sections.results, 1) : "The document presents various findings based on the analysis conducted.";
            } else if (lowerQuestion.includes('method') || lowerQuestion.includes('approach')) {
                return sections.methodology ? this.extractKeyPoints(sections.methodology, 1) : "A systematic approach was used to gather and analyze information.";
            } else if (lowerQuestion.includes('conclusion')) {
                return sections.conclusion ? this.extractKeyPoints(sections.conclusion, 1) : "The document concludes with important insights and implications.";
            } else if (lowerQuestion.includes('recommendation')) {
                return sections.conclusion ? this.extractKeyPoints(sections.conclusion, 1) : "Recommendations are provided based on the analysis and findings.";
            }
            
            return "This information is covered in the document's content.";
        }
    };

    // =============================================
    // Authentication Management
    // =============================================
    const authManager = {
        login: function(email, password) {
            return new Promise((resolve) => {
                // Simulate API call with real validation
                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('pdfSummaryUsers') || '{}');
                    
                    if (users[email] && users[email].password === this.hashPassword(password)) {
                        const user = {
                            email: email,
                            name: users[email].name,
                            token: 'real-jwt-token-' + Date.now(),
                            plan: users[email].plan || 'free',
                            credits: users[email].credits || 5
                        };
                        localStorage.setItem('currentUser', JSON.stringify(user));
                        userCredits = user.credits;
                        resolve({ success: true, user });
                    } else {
                        resolve({ success: false, error: 'Invalid email or password' });
                    }
                }, 1500);
            });
        },
        
        signup: function(name, email, password) {
            return new Promise((resolve) => {
                // Simulate API call with real validation
                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('pdfSummaryUsers') || '{}');
                    
                    if (users[email]) {
                        resolve({ success: false, error: 'Email already registered' });
                        return;
                    }
                    
                    if (password.length < 6) {
                        resolve({ success: false, error: 'Password must be at least 6 characters' });
                        return;
                    }
                    
                    // Create new user
                    users[email] = {
                        name: name,
                        password: this.hashPassword(password),
                        plan: 'free',
                        credits: 5,
                        createdAt: new Date().toISOString()
                    };
                    
                    localStorage.setItem('pdfSummaryUsers', JSON.stringify(users));
                    
                    const user = {
                        email: email,
                        name: name,
                        token: 'real-jwt-token-' + Date.now(),
                        plan: 'free',
                        credits: 5
                    };
                    
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    userCredits = 5;
                    resolve({ success: true, user });
                }, 1500);
            });
        },
        
        hashPassword: function(password) {
            // Simple hash function for demo purposes
            // In a real app, use proper hashing like bcrypt
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString();
        },
        
        logout: function() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            userCredits = 5;
            this.updateUI();
            enhancedUX.showToast('Logged out successfully', 'success');
        },
        
        checkAuthStatus: function() {
            const userData = localStorage.getItem('currentUser');
            if (userData) {
                currentUser = JSON.parse(userData);
                userCredits = currentUser.credits || 5;
                this.updateUI();
                creditManager.initializeCredits();
                return true;
            }
            return false;
        },
        
        updateUI: function() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const mainApp = document.getElementById('main-app');
            const landingPage = document.querySelector('section.relative.min-h-screen');
            const pricingSection = document.getElementById('pricing');
            
            if (currentUser) {
                // User is logged in
                if (authButtons) authButtons.classList.add('hidden');
                if (userMenu) {
                    userMenu.classList.remove('hidden');
                    document.getElementById('user-initials').textContent = 
                        currentUser.name.charAt(0).toUpperCase();
                    document.getElementById('user-email-nav').textContent = currentUser.email;
                }
                if (mainApp) mainApp.classList.remove('hidden');
                if (landingPage) landingPage.style.display = 'none';
                if (pricingSection) pricingSection.style.display = 'none';
                
                // Update reset date
                const resetDate = document.getElementById('reset-date');
                if (resetDate) {
                    resetDate.textContent = creditManager.getResetDate();
                }
            } else {
                // User is not logged in
                if (authButtons) authButtons.classList.remove('hidden');
                if (userMenu) userMenu.classList.add('hidden');
                if (mainApp) mainApp.classList.add('hidden');
                if (landingPage) landingPage.style.display = 'flex';
                if (pricingSection) pricingSection.style.display = 'block';
            }
        }
    };

    // =============================================
    // Payment Integration
    // =============================================
    const paymentManager = {
        initializeStripe: function() {
            // Initialize Stripe with test key
            stripe = Stripe('pk_test_51ExampleTestKey1234567890');
            elements = stripe.elements({
                appearance: {
                    theme: 'night',
                    variables: {
                        colorPrimary: '#6366f1',
                        colorBackground: 'rgba(255, 255, 255, 0.1)',
                        colorText: 'white',
                        colorDanger: '#ef4444',
                        fontFamily: 'Inter, system-ui, sans-serif',
                        spacingUnit: '4px',
                        borderRadius: '8px'
                    }
                }
            });
        },
        
        createPaymentIntent: function(amount, credits) {
            return new Promise((resolve) => {
                // Simulate API call to create payment intent
                setTimeout(() => {
                    resolve({
                        clientSecret: 'pi_test_example_client_secret_123456',
                        amount: amount,
                        credits: credits
                    });
                }, 1000);
            });
        },
        
        setupPaymentForm: async function(amount, credits) {
            try {
                const { clientSecret } = await this.createPaymentIntent(amount, credits);
                
                const paymentElement = elements.create('payment', {
                    clientSecret: clientSecret,
                });
                
                await paymentElement.mount('#payment-element');
                
                return paymentElement;
            } catch (error) {
                console.error('Error setting up payment:', error);
                enhancedUX.showToast('Error setting up payment form', 'error');
                throw error;
            }
        },
        
        processPayment: async function(paymentElement) {
            const button = document.querySelector('#payment-modal button');
            enhancedUX.showLoading(button, 'Processing payment...');
            
            try {
                const { error } = await stripe.confirmPayment({
                    elements,
                    confirmParams: {
                        return_url: window.location.href,
                    },
                    redirect: 'if_required'
                });
                
                if (error) {
                    enhancedUX.showToast(error.message, 'error');
                    enhancedUX.hideLoading(button);
                    return false;
                }
                
                // Simulate successful payment
                setTimeout(() => {
                    enhancedUX.hideLoading(button);
                    this.handleSuccessfulPayment();
                }, 2000);
                
                return true;
            } catch (error) {
                enhancedUX.hideLoading(button);
                enhancedUX.showToast('Payment processing failed', 'error');
                return false;
            }
        },
        
        handleSuccessfulPayment: function() {
            creditManager.addCredits(selectedCreditPackage.credits);
            hidePaymentModal();
            hideCreditModal();
            enhancedUX.showToast(`Payment successful! ${selectedCreditPackage.credits} credits added to your account.`, 'success');
            
            // Update user data
            if (currentUser) {
                currentUser.credits = userCredits;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }
    };

    // =============================================
    // Modal Functions
    // =============================================
    function showAuthModal(type) {
        const modal = document.getElementById('auth-modal');
        if (modal) {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            switchAuthForm(type);
        }
    }

    function hideAuthModal() {
        const modal = document.getElementById('auth-modal');
        if (modal) {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
        }
    }

    function showCreditModal() {
        const modal = document.getElementById('credit-modal');
        if (modal) {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }
    }

    function hideCreditModal() {
        const modal = document.getElementById('credit-modal');
        if (modal) {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
        }
    }

    function showPaymentModal() {
        const modal = document.getElementById('payment-modal');
        if (modal) {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // Update payment modal with selected package
            document.getElementById('payment-credits').textContent = selectedCreditPackage.credits;
            document.getElementById('payment-credits-display').textContent = selectedCreditPackage.credits;
            document.getElementById('payment-total').textContent = selectedCreditPackage.price.toFixed(2);
            document.getElementById('payment-button-total').textContent = selectedCreditPackage.price.toFixed(2);
            
            // Setup payment form
            paymentManager.setupPaymentForm(selectedCreditPackage.price * 100, selectedCreditPackage.credits);
        }
    }

    function hidePaymentModal() {
        const modal = document.getElementById('payment-modal');
        if (modal) {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
        }
    }

    function switchAuthForm(type) {
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        
        if (type === 'login') {
            loginForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
        } else {
            loginForm.classList.add('hidden');
            signupForm.classList.remove('hidden');
        }
    }

    function selectCreditPackage(credits) {
        let price = 0;
        switch(credits) {
            case 10:
                price = 2.00;
                break;
            case 50:
                price = 8.00;
                break;
            case 100:
                price = 14.00;
                break;
        }
        
        selectedCreditPackage = { credits, price };
        
        // Update UI
        document.getElementById('selected-credits').textContent = credits;
        document.getElementById('selected-price').textContent = price.toFixed(2);
        
        // Update selection visual
        document.querySelectorAll('#credit-modal [onclick^="selectCreditPackage"]').forEach(el => {
            el.classList.remove('border-indigo-500/50');
            el.classList.add('border-white/20');
        });
        
        event.currentTarget.classList.remove('border-white/20');
        event.currentTarget.classList.add('border-indigo-500/50');
    }

    // =============================================
    // Authentication Functions
    // =============================================
    async function login() {
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const button = document.querySelector('#login-form button[type="button"]');
        
        if (!email || !password) {
            enhancedUX.showToast('Please fill in all fields', 'error');
            return;
        }
        
        enhancedUX.showLoading(button, 'Signing in...');
        
        try {
            const result = await authManager.login(email, password);
            
            if (result.success) {
                currentUser = result.user;
                authManager.updateUI();
                hideAuthModal();
                enhancedUX.showToast('Welcome back!', 'success');
                resetApp();
            } else {
                enhancedUX.showToast(result.error, 'error');
            }
        } catch (error) {
            enhancedUX.showToast('Login failed. Please try again.', 'error');
        } finally {
            enhancedUX.hideLoading(button);
        }
    }

    async function signup() {
        const name = document.getElementById('signup-name').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const terms = document.getElementById('terms').checked;
        const button = document.querySelector('#signup-form button[type="button"]');
        
        if (!name || !email || !password) {
            enhancedUX.showToast('Please fill in all fields', 'error');
            return;
        }
        
        if (!terms) {
            enhancedUX.showToast('Please accept the terms and conditions', 'error');
            return;
        }
        
        if (password.length < 6) {
            enhancedUX.showToast('Password must be at least 6 characters', 'error');
            return;
        }
        
        const passwordStrength = checkPasswordStrength(password);
        if (passwordStrength < 2) {
            enhancedUX.showToast('Please choose a stronger password', 'error');
            return;
        }
        
        enhancedUX.showLoading(button, 'Creating account...');
        
        try {
            const result = await authManager.signup(name, email, password);
            
            if (result.success) {
                currentUser = result.user;
                authManager.updateUI();
                hideAuthModal();
                enhancedUX.showToast('Account created successfully!', 'success');
                resetApp();
            } else {
                enhancedUX.showToast(result.error, 'error');
            }
        } catch (error) {
            enhancedUX.showToast('Signup failed. Please try again.', 'error');
        } finally {
            enhancedUX.hideLoading(button);
        }
    }

    function logout() {
        authManager.logout();
    }

    function scrollToFeatures() {
        document.getElementById('features').scrollIntoView({ 
            behavior: 'smooth' 
        });
    }

    // =============================================
    // Payment Functions
    // =============================================
    async function processPayment() {
        const paymentElement = elements.getElement('payment');
        await paymentManager.processPayment(paymentElement);
    }

    function upgradeToPro() {
        enhancedUX.showToast('Redirecting to upgrade page...', 'info');
        // In a real app, this would redirect to a payment page
        setTimeout(() => {
            enhancedUX.showToast('Pro plan features coming soon!', 'info');
        }, 1500);
    }

    function contactSales() {
        enhancedUX.showToast('Please contact sales@pdfsummarypro.com for enterprise plans', 'info');
    }

    // =============================================
    // PDF Upload and Processing
    // =============================================
    function initializeFileUpload() {
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('pdf-file');
        
        if (!uploadArea || !fileInput) return;
        
        // Click to upload
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('border-indigo-400', 'bg-white/10');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('border-indigo-400', 'bg-white/10');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('border-indigo-400', 'bg-white/10');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelection(files[0]);
            }
        });
        
        // File input change
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelection(e.target.files[0]);
            }
        });
    }

    async function handleFileSelection(file) {
        const fileInfo = document.getElementById('file-info');
        const summaryOptions = document.getElementById('summary-options');
        const uploadArea = document.getElementById('upload-area');
        
        if (!file) return;
        
        // Show loading state
        enhancedUX.showToast('Validating PDF file...', 'info');
        
        // Validate file
        const validation = await fileValidator.validatePDF(file);
        
        if (!validation.isValid) {
            enhancedUX.showToast(validation.error, 'error');
            return;
        }
        
        // File is valid
        selectedFile = file;
        const fileData = fileValidator.getFileInfo(file);
        
        // Update UI
        fileInfo.innerHTML = `
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-file-pdf text-green-400"></i>
                    </div>
                    <div>
                        <div class="font-semibold text-white">${fileData.name}</div>
                        <div class="text-sm text-gray-400">${fileData.size} â€¢ ${validation.pages} pages</div>
                    </div>
                </div>
                <button onclick="clearSelectedFile()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        fileInfo.classList.remove('hidden');
        summaryOptions.classList.remove('hidden');
        uploadArea.classList.add('hidden');
        
        // Render summary types
        summaryTypes.renderTypes();
        summaryTypes.selectType('brief');
        
        enhancedUX.showToast('PDF validated successfully!', 'success');
    }

    function clearSelectedFile() {
        selectedFile = null;
        extractedText = '';
        
        const fileInfo = document.getElementById('file-info');
        const summaryOptions = document.getElementById('summary-options');
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('pdf-file');
        
        if (fileInfo) fileInfo.classList.add('hidden');
        if (summaryOptions) summaryOptions.classList.add('hidden');
        if (uploadArea) uploadArea.classList.remove('hidden');
        if (fileInput) fileInput.value = '';
    }

    async function uploadPDF() {
        if (!selectedFile) {
            enhancedUX.showToast('Please select a PDF file first', 'warning');
            return;
        }
        
        // Check if user has enough credits
        if (userCredits < 1) {
            enhancedUX.showToast('Not enough credits. Please purchase more credits to continue.', 'error');
            showCreditModal();
            return;
        }
        
        const button = document.querySelector('#summary-options button');
        const resultsSection = document.getElementById('results-section');
        const summaryContent = document.getElementById('summary-content');
        const summaryTypeDisplay = document.getElementById('summary-type-display');
        const summaryStats = document.getElementById('summary-stats');
        
        if (!button || !resultsSection || !summaryContent) return;
        
        enhancedUX.showLoading(button, 'Processing PDF...');
        
        try {
            // Use one credit
            if (!creditManager.useCredit()) {
                enhancedUX.showToast('Not enough credits. Please purchase more credits.', 'error');
                enhancedUX.hideLoading(button);
                showCreditModal();
                return;
            }
            
            // Show results section
            resultsSection.classList.remove('hidden');
            
            // Update summary type display
            const selectedType = summaryTypes.getSelectedType();
            if (summaryTypeDisplay && selectedType) {
                summaryTypeDisplay.textContent = selectedType.name;
            }
            
            // Show processing message
            summaryContent.textContent = 'Processing PDF... Please wait while we extract text and generate your summary. This may take a few moments.';
            
            // Process PDF
            const summary = await pdfProcessor.processPDF(selectedFile, selectedSummaryType);
            
            // Display summary
            summaryContent.textContent = summary;
            
            // Update stats
            if (summaryStats) {
                const wordCount = summary.split(/\s+/).length;
                const charCount = summary.length;
                const readingTime = Math.ceil(wordCount / 200);
                summaryStats.textContent = `${wordCount} words, ${charCount} chars, ${readingTime} min read`;
            }
            
            enhancedUX.showToast('Summary generated successfully!', 'success');
            
            // Update user data
            if (currentUser) {
                currentUser.credits = userCredits;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Update user in users database
                const users = JSON.parse(localStorage.getItem('pdfSummaryUsers') || '{}');
                if (users[currentUser.email]) {
                    users[currentUser.email].credits = userCredits;
                    localStorage.setItem('pdfSummaryUsers', JSON.stringify(users));
                }
            }
        } catch (error) {
            enhancedUX.showToast('Failed to process PDF: ' + error.message, 'error');
            summaryContent.textContent = 'Error: Unable to generate summary. Please try again with a different PDF file.\n\nError details: ' + error.message;
            
            // Refund credit if processing failed
            creditManager.addCredits(1);
        } finally {
            enhancedUX.hideLoading(button);
        }
    }

    function exportSummary() {
        const summaryContent = document.getElementById('summary-content');
        if (!summaryContent) return;
        
        const summary = summaryContent.textContent;
        if (!summary || summary.includes('Processing PDF...')) {
            enhancedUX.showToast('No summary available to export', 'warning');
            return;
        }
        
        const selectedType = summaryTypes.getSelectedType();
        const fileName = `summary_${selectedType ? selectedType.name.toLowerCase().replace(/ /g, '_') : 'brief'}_${new Date().getTime()}.txt`;
        
        // Create and download file
        const blob = new Blob([summary], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        enhancedUX.showToast('Summary exported successfully!', 'success');
    }

    function resetApp() {
        clearSelectedFile();
        
        const resultsSection = document.getElementById('results-section');
        if (resultsSection) {
            resultsSection.classList.add('hidden');
        }
        
        enhancedUX.showToast('App reset successfully', 'info');
    }

    // =============================================
    // Mouse Follower Effect
    // =============================================
    function initializeMouseFollowers() {
        const followers = [
            document.getElementById('mouse-follower-1'),
            document.getElementById('mouse-follower-2'),
            document.getElementById('mouse-follower-3')
        ].filter(f => f !== null);
        
        if (followers.length === 0) return;
        
        let mouseX = 0;
        let mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        function animateFollowers() {
            followers.forEach((follower, index) => {
                const delay = index * 100;
                const x = mouseX - follower.offsetWidth / 2;
                const y = mouseY - follower.offsetHeight / 2;
                
                setTimeout(() => {
                    follower.style.transform = `translate(${x}px, ${y}px)`;
                }, delay);
            });
            
            requestAnimationFrame(animateFollowers);
        }
        
        animateFollowers();
    }

    // =============================================
    // Initialize Application
    // =============================================
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Stripe
        paymentManager.initializeStripe();
        
        // Check authentication status
        authManager.checkAuthStatus();
        
        // Initialize file upload
        initializeFileUpload();
        
        // Initialize mouse followers
        initializeMouseFollowers();
        
        // Add smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        enhancedUX.showToast('Welcome to PDF Summary Pro!', 'info');
    });

    // =============================================
    // Global Functions for HTML onclick handlers
    // =============================================
    window.showAuthModal = showAuthModal;
    window.hideAuthModal = hideAuthModal;
    window.switchAuthForm = switchAuthForm;
    window.login = login;
    window.signup = signup;
    window.logout = logout;
    window.scrollToFeatures = scrollToFeatures;
    window.uploadPDF = uploadPDF;
    window.exportSummary = exportSummary;
    window.resetApp = resetApp;
    window.clearSelectedFile = clearSelectedFile;
    window.showCreditModal = showCreditModal;
    window.hideCreditModal = hideCreditModal;
    window.selectCreditPackage = selectCreditPackage;
    window.showPaymentModal = showPaymentModal;
    window.hidePaymentModal = hidePaymentModal;
    window.processPayment = processPayment;
    window.upgradeToPro = upgradeToPro;
    window.contactSales = contactSales;
    window.checkPasswordStrength = checkPasswordStrength;
    </script>
</body>
</html>